{
  "version": "1.0",
  "engine": "darwin|Transformer|1.37.6|26a36c88a94c677efd734e874ba081dabb84a224|2022-04-23_06:03:56AM",
  "containerized": false,
  "host_distro": {
    "name": "",
    "version": "",
    "display_name": "other"
  },
  "type": "build",
  "state": "error",
  "target_reference": "nextpress/caesar-wordpress:latest",
  "system": {
    "type": "",
    "release": "",
    "distro": {
      "name": "",
      "version": "",
      "display_name": ""
    }
  },
  "source_image": {
    "identity": {
      "id": ""
    },
    "size": 0,
    "size_human": "",
    "create_time": "",
    "docker_version": "",
    "architecture": "",
    "container_entry": {
      "exe_path": ""
    }
  },
  "minified_image_size": 0,
  "minified_image_size_human": "",
  "minified_image": "",
  "minified_image_has_data": false,
  "minified_by": 0,
  "artifact_location": "",
  "container_report_name": "",
  "seccomp_profile_name": "",
  "apparmor_profile_name": "",
  "image_stack": [
    {
      "is_top_image": true,
      "id": "sha256:a3c4e4e230eebdddf2bb0f64c683b4cf9d3d1fb68bcd2a99676d111664e318db",
      "full_name": "nextpress/caesar-wordpress:0.0.5",
      "repo_name": "nextpress/caesar-wordpress",
      "version_tag": "0.0.5",
      "raw_tags": [
        "nextpress/caesar-wordpress:0.0.5",
        "nextpress/caesar-wordpress:latest"
      ],
      "create_time": "2022-05-20T23:19:52Z",
      "new_size": 562614080,
      "new_size_human": "563 MB",
      "instructions": [
        {
          "type": "ADD",
          "time": "2022-05-11T00:46:59Z",
          "is_nop": true,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 74346813,
          "size_human": "74 MB",
          "params": "file:158a0e401328bd7c0d49b9e8539186098967218f1b1a8c811f4398d29b74397f in /",
          "command_snippet": "ADD file:158a0e401328bd7c0d49b9e853918609896...",
          "command_all": "ADD file:158a0e401328bd7c0d49b9e8539186098967218f1b1a8c811f4398d29b74397f /",
          "target": "/",
          "source_type": "file"
        },
        {
          "type": "CMD",
          "time": "2022-05-11T00:47:00Z",
          "is_nop": true,
          "is_exec_form": true,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 0,
          "params": "[\"bash\"]\n",
          "command_snippet": "CMD [\"bash\"]\n",
          "command_all": "CMD [\"bash\"]\n"
        },
        {
          "type": "RUN",
          "time": "2022-05-11T05:09:58Z",
          "is_nop": false,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 46,
          "size_human": "46 B",
          "command_snippet": "RUN set -eux; \t{ \t\techo 'Package: php*'; \t\te...",
          "command_all": "RUN set -eux; \t{ \t\techo 'Package: php*'; \t\techo 'Pin: release *'; \t\techo 'Pin-Priority: -1'; \t} > /etc/apt/preferences.d/no-debian-php",
          "system_commands": [
            "set -eux",
            "{ echo 'Package: php*'",
            "echo 'Pin: release *'",
            "echo 'Pin-Priority: -1'",
            "} > /etc/apt/preferences.d/no-debian-php"
          ]
        },
        {
          "type": "ENV",
          "time": "2022-05-11T05:09:59Z",
          "is_nop": true,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 0,
          "params": "PHPIZE_DEPS=autoconf \t\tdpkg-dev \t\tfile \t\tg++ \t\tgcc \t\tlibc-dev \t\tmake \t\tpkg-config \t\tre2c",
          "command_snippet": "ENV PHPIZE_DEPS=autoconf \t\tdpkg-dev \t\tfile \t...",
          "command_all": "ENV PHPIZE_DEPS=autoconf \t\tdpkg-dev \t\tfile \t\tg++ \t\tgcc \t\tlibc-dev \t\tmake \t\tpkg-config \t\tre2c"
        },
        {
          "type": "RUN",
          "time": "2022-05-11T05:10:15Z",
          "is_nop": false,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 248659701,
          "size_human": "249 MB",
          "command_snippet": "RUN set -eux; \tapt-get update; \tapt-get inst...",
          "command_all": "RUN set -eux; \tapt-get update; \tapt-get install -y --no-install-recommends \t\t$PHPIZE_DEPS \t\tca-certificates \t\tcurl \t\txz-utils \t; \trm -rf /var/lib/apt/lists/*",
          "system_commands": [
            "set -eux",
            "apt-get update",
            "apt-get install -y --no-install-recommends $PHPIZE_DEPS ca-certificates curl xz-utils",
            "rm -rf /var/lib/apt/lists/*"
          ]
        },
        {
          "type": "ENV",
          "time": "2022-05-11T05:10:16Z",
          "is_nop": true,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 0,
          "params": "PHP_INI_DIR=/usr/local/etc/php",
          "command_snippet": "ENV PHP_INI_DIR=/usr/local/etc/php",
          "command_all": "ENV PHP_INI_DIR=/usr/local/etc/php"
        },
        {
          "type": "RUN",
          "time": "2022-05-11T05:10:16Z",
          "is_nop": false,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 0,
          "command_snippet": "RUN set -eux; \tmkdir -p \"$PHP_INI_DIR/conf.d...",
          "command_all": "RUN set -eux; \tmkdir -p \"$PHP_INI_DIR/conf.d\"; \t[ ! -d /var/www/html ]; \tmkdir -p /var/www/html; \tchown www-data:www-data /var/www/html; \tchmod 777 /var/www/html",
          "system_commands": [
            "set -eux",
            "mkdir -p \"$PHP_INI_DIR/conf.d\"",
            "[ ! -d /var/www/html ]",
            "mkdir -p /var/www/html",
            "chown www-data:www-data /var/www/html",
            "chmod 777 /var/www/html"
          ]
        },
        {
          "type": "ENV",
          "time": "2022-05-11T05:14:26Z",
          "is_nop": true,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 0,
          "params": "APACHE_CONFDIR=/etc/apache2",
          "command_snippet": "ENV APACHE_CONFDIR=/etc/apache2",
          "command_all": "ENV APACHE_CONFDIR=/etc/apache2"
        },
        {
          "type": "ENV",
          "time": "2022-05-11T05:14:27Z",
          "is_nop": true,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 0,
          "params": "APACHE_ENVVARS=/etc/apache2/envvars",
          "command_snippet": "ENV APACHE_ENVVARS=/etc/apache2/envvars",
          "command_all": "ENV APACHE_ENVVARS=/etc/apache2/envvars"
        },
        {
          "type": "RUN",
          "time": "2022-05-11T05:14:35Z",
          "is_nop": false,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 45989355,
          "size_human": "46 MB",
          "command_snippet": "RUN set -eux; \tapt-get update; \tapt-get inst...",
          "command_all": "RUN set -eux; \tapt-get update; \tapt-get install -y --no-install-recommends apache2; \trm -rf /var/lib/apt/lists/*; \t\tsed -ri 's/^export ([^=]+)=(.*)$/: ${\\1:=\\2}\\nexport \\1/' \"$APACHE_ENVVARS\"; \t\t. \"$APACHE_ENVVARS\"; \tfor dir in \t\t\"$APACHE_LOCK_DIR\" \t\t\"$APACHE_RUN_DIR\" \t\t\"$APACHE_LOG_DIR\" \t; do \t\trm -rvf \"$dir\"; \t\tmkdir -p \"$dir\"; \t\tchown \"$APACHE_RUN_USER:$APACHE_RUN_GROUP\" \"$dir\"; \t\tchmod 777 \"$dir\"; \tdone; \t\trm -rvf /var/www/html/*; \t\tln -sfT /dev/stderr \"$APACHE_LOG_DIR/error.log\"; \tln -sfT /dev/stdout \"$APACHE_LOG_DIR/access.log\"; \tln -sfT /dev/stdout \"$APACHE_LOG_DIR/other_vhosts_access.log\"; \tchown -R --no-dereference \"$APACHE_RUN_USER:$APACHE_RUN_GROUP\" \"$APACHE_LOG_DIR\"",
          "system_commands": [
            "set -eux",
            "apt-get update",
            "apt-get install -y --no-install-recommends apache2",
            "rm -rf /var/lib/apt/lists/*",
            "sed -ri 's/^export ([^=]+)=(.*)$/: ${1:=2}nexport 1/' \"$APACHE_ENVVARS\"",
            ". \"$APACHE_ENVVARS\"",
            "for dir in \"$APACHE_LOCK_DIR\" \"$APACHE_RUN_DIR\" \"$APACHE_LOG_DIR\"",
            "do rm -rvf \"$dir\"",
            "mkdir -p \"$dir\"",
            "chown \"$APACHE_RUN_USER:$APACHE_RUN_GROUP\" \"$dir\"",
            "chmod 777 \"$dir\"",
            "done",
            "rm -rvf /var/www/html/*",
            "ln -sfT /dev/stderr \"$APACHE_LOG_DIR/error.log\"",
            "ln -sfT /dev/stdout \"$APACHE_LOG_DIR/access.log\"",
            "ln -sfT /dev/stdout \"$APACHE_LOG_DIR/other_vhosts_access.log\"",
            "chown -R --no-dereference \"$APACHE_RUN_USER:$APACHE_RUN_GROUP\" \"$APACHE_LOG_DIR\""
          ]
        },
        {
          "type": "RUN",
          "time": "2022-05-11T05:14:36Z",
          "is_nop": false,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 68,
          "size_human": "68 B",
          "command_snippet": "RUN a2dismod mpm_event && \\\n\ta2enmod mpm_pre...",
          "command_all": "RUN a2dismod mpm_event && \\\n\ta2enmod mpm_prefork",
          "system_commands": [
            "a2dismod mpm_event",
            "a2enmod mpm_prefork"
          ]
        },
        {
          "type": "RUN",
          "time": "2022-05-11T05:14:37Z",
          "is_nop": false,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 237,
          "size_human": "237 B",
          "command_snippet": "RUN { \t\techo '<FilesMatch \\.php$>'; \t\techo '...",
          "command_all": "RUN { \t\techo '<FilesMatch \\.php$>'; \t\techo '\\tSetHandler application/x-httpd-php'; \t\techo '</FilesMatch>'; \t\techo; \t\techo 'DirectoryIndex disabled'; \t\techo 'DirectoryIndex index.php index.html'; \t\techo; \t\techo '<Directory /var/www/>'; \t\techo '\\tOptions -Indexes'; \t\techo '\\tAllowOverride All'; \t\techo '</Directory>'; \t} | tee \"$APACHE_CONFDIR/conf-available/docker-php.conf\" && \\\n\ta2enconf docker-php",
          "system_commands": [
            "{ echo '<FilesMatch .php$>'; echo 'tSetHandler application/x-httpd-php'; echo '</FilesMatch>'; echo; echo 'DirectoryIndex disabled'; echo 'DirectoryIndex index.php index.html'; echo; echo '<Directory /var/www/>'; echo 'tOptions -Indexes'; echo 'tAllowOverride All'; echo '</Directory>'; } | tee \"$APACHE_CONFDIR/conf-available/docker-php.conf\"",
            "a2enconf docker-php"
          ]
        },
        {
          "type": "ENV",
          "time": "2022-05-11T05:14:38Z",
          "is_nop": true,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 0,
          "params": "PHP_CFLAGS=-fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64",
          "command_snippet": "ENV PHP_CFLAGS=-fstack-protector-strong -fpi...",
          "command_all": "ENV PHP_CFLAGS=-fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64"
        },
        {
          "type": "ENV",
          "time": "2022-05-11T05:14:39Z",
          "is_nop": true,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 0,
          "params": "PHP_CPPFLAGS=-fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64",
          "command_snippet": "ENV PHP_CPPFLAGS=-fstack-protector-strong -f...",
          "command_all": "ENV PHP_CPPFLAGS=-fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64"
        },
        {
          "type": "ENV",
          "time": "2022-05-11T05:14:40Z",
          "is_nop": true,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 0,
          "params": "PHP_LDFLAGS=-Wl,-O1 -pie",
          "command_snippet": "ENV PHP_LDFLAGS=-Wl,-O1 -pie",
          "command_all": "ENV PHP_LDFLAGS=-Wl,-O1 -pie"
        },
        {
          "type": "ENV",
          "time": "2022-05-11T07:06:57Z",
          "is_nop": true,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 0,
          "params": "GPG_KEYS=42670A7FE4D0441C8E4632349E4FDC074A4EF02D 5A52880781F755608BF815FC910DEB46F53EA312",
          "command_snippet": "ENV GPG_KEYS=42670A7FE4D0441C8E4632349E4FDC0...",
          "command_all": "ENV GPG_KEYS=42670A7FE4D0441C8E4632349E4FDC074A4EF02D 5A52880781F755608BF815FC910DEB46F53EA312"
        },
        {
          "type": "ENV",
          "time": "2022-05-11T07:06:57Z",
          "is_nop": true,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 0,
          "params": "PHP_VERSION=7.4.29",
          "command_snippet": "ENV PHP_VERSION=7.4.29",
          "command_all": "ENV PHP_VERSION=7.4.29"
        },
        {
          "type": "ENV",
          "time": "2022-05-11T07:06:58Z",
          "is_nop": true,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 0,
          "params": "PHP_URL=https://www.php.net/distributions/php-7.4.29.tar.xz PHP_ASC_URL=https://www.php.net/distributions/php-7.4.29.tar.xz.asc",
          "command_snippet": "ENV PHP_URL=https://www.php.net/distribution...",
          "command_all": "ENV PHP_URL=https://www.php.net/distributions/php-7.4.29.tar.xz PHP_ASC_URL=https://www.php.net/distributions/php-7.4.29.tar.xz.asc"
        },
        {
          "type": "ENV",
          "time": "2022-05-11T07:06:59Z",
          "is_nop": true,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 0,
          "params": "PHP_SHA256=7d0f07869f33311ff3fe1138dc0d6c0d673c37fcb737eaed2c6c10a949f1aed6",
          "command_snippet": "ENV PHP_SHA256=7d0f07869f33311ff3fe1138dc0d6...",
          "command_all": "ENV PHP_SHA256=7d0f07869f33311ff3fe1138dc0d6c0d673c37fcb737eaed2c6c10a949f1aed6"
        },
        {
          "type": "RUN",
          "time": "2022-05-11T07:07:10Z",
          "is_nop": false,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 10890875,
          "size_human": "11 MB",
          "command_snippet": "RUN set -eux; \t\tsavedAptMark=\"$(apt-mark sho...",
          "command_all": "RUN set -eux; \t\tsavedAptMark=\"$(apt-mark showmanual)\"; \tapt-get update; \tapt-get install -y --no-install-recommends gnupg dirmngr; \trm -rf /var/lib/apt/lists/*; \t\tmkdir -p /usr/src; \tcd /usr/src; \t\tcurl -fsSL -o php.tar.xz \"$PHP_URL\"; \t\tif [ -n \"$PHP_SHA256\" ]; then \t\techo \"$PHP_SHA256 *php.tar.xz\" | sha256sum -c -; \tfi; \t\tif [ -n \"$PHP_ASC_URL\" ]; then \t\tcurl -fsSL -o php.tar.xz.asc \"$PHP_ASC_URL\"; \t\texport GNUPGHOME=\"$(mktemp -d)\"; \t\tfor key in $GPG_KEYS; do \t\t\tgpg --batch --keyserver keyserver.ubuntu.com --recv-keys \"$key\"; \t\tdone; \t\tgpg --batch --verify php.tar.xz.asc php.tar.xz; \t\tgpgconf --kill all; \t\trm -rf \"$GNUPGHOME\"; \tfi; \t\tapt-mark auto '.*' > /dev/null; \tapt-mark manual $savedAptMark > /dev/null; \tapt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false",
          "system_commands": [
            "set -eux",
            "savedAptMark=\"$(apt-mark showmanual)\"",
            "apt-get update",
            "apt-get install -y --no-install-recommends gnupg dirmngr",
            "rm -rf /var/lib/apt/lists/*",
            "mkdir -p /usr/src",
            "cd /usr/src",
            "curl -fsSL -o php.tar.xz \"$PHP_URL\"",
            "if [ -n \"$PHP_SHA256\" ]",
            "then echo \"$PHP_SHA256 *php.tar.xz\" | sha256sum -c -",
            "fi",
            "if [ -n \"$PHP_ASC_URL\" ]",
            "then curl -fsSL -o php.tar.xz.asc \"$PHP_ASC_URL\"",
            "export GNUPGHOME=\"$(mktemp -d)\"",
            "for key in $GPG_KEYS",
            "do gpg --batch --keyserver keyserver.ubuntu.com --recv-keys \"$key\"",
            "done",
            "gpg --batch --verify php.tar.xz.asc php.tar.xz",
            "gpgconf --kill all",
            "rm -rf \"$GNUPGHOME\"",
            "fi",
            "apt-mark auto '.*' > /dev/null",
            "apt-mark manual $savedAptMark > /dev/null",
            "apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false"
          ]
        },
        {
          "type": "COPY",
          "time": "2022-05-11T07:07:12Z",
          "is_nop": true,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 587,
          "size_human": "587 B",
          "params": "file:ce57c04b70896f77cc11eb2766417d8a1240fcffe5bba92179ec78c458844110 in /usr/local/bin/",
          "command_snippet": "COPY file:ce57c04b70896f77cc11eb2766417d8a12...",
          "command_all": "COPY file:ce57c04b70896f77cc11eb2766417d8a1240fcffe5bba92179ec78c458844110 /usr/local/bin/",
          "target": "/usr/local/bin/",
          "source_type": "file"
        },
        {
          "type": "RUN",
          "time": "2022-05-11T07:09:00Z",
          "is_nop": false,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 40023981,
          "size_human": "40 MB",
          "command_snippet": "RUN set -eux; \t\tsavedAptMark=\"$(apt-mark sho...",
          "command_all": "RUN set -eux; \t\tsavedAptMark=\"$(apt-mark showmanual)\"; \tapt-get update; \tapt-get install -y --no-install-recommends \t\tapache2-dev \t\tlibargon2-dev \t\tlibcurl4-openssl-dev \t\tlibonig-dev \t\tlibreadline-dev \t\tlibsodium-dev \t\tlibsqlite3-dev \t\tlibssl-dev \t\tlibxml2-dev \t\tzlib1g-dev \t; \t\texport \t\tCFLAGS=\"$PHP_CFLAGS\" \t\tCPPFLAGS=\"$PHP_CPPFLAGS\" \t\tLDFLAGS=\"$PHP_LDFLAGS\" \t; \tdocker-php-source extract; \tcd /usr/src/php; \tgnuArch=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\"; \tdebMultiarch=\"$(dpkg-architecture --query DEB_BUILD_MULTIARCH)\"; \tif [ ! -d /usr/include/curl ]; then \t\tln -sT \"/usr/include/$debMultiarch/curl\" /usr/local/include/curl; \tfi; \t./configure \t\t--build=\"$gnuArch\" \t\t--with-config-file-path=\"$PHP_INI_DIR\" \t\t--with-config-file-scan-dir=\"$PHP_INI_DIR/conf.d\" \t\t\t\t--enable-option-checking=fatal \t\t\t\t--with-mhash \t\t\t\t--with-pic \t\t\t\t--enable-ftp \t\t--enable-mbstring \t\t--enable-mysqlnd \t\t--with-password-argon2 \t\t--with-sodium=shared \t\t--with-pdo-sqlite=/usr \t\t--with-sqlite3=/usr \t\t\t\t--with-curl \t\t--with-iconv \t\t--with-openssl \t\t--with-readline \t\t--with-zlib \t\t\t\t--disable-phpdbg \t\t\t\t--with-pear \t\t\t\t$(test \"$gnuArch\" = 's390x-linux-gnu' && \\\n\techo '--without-pcre-jit') \t\t--with-libdir=\"lib/$debMultiarch\" \t\t\t\t--disable-cgi \t\t\t\t--with-apxs2 \t; \tmake -j \"$(nproc)\"; \tfind -type f -name '*.a' -delete; \tmake install; \tfind \t\t/usr/local \t\t-type f \t\t-perm '/0111' \t\t-exec sh -euxc ' \t\t\tstrip --strip-all \"$@\" || : \t\t' -- '{}' + \t; \tmake clean; \t\tcp -v php.ini-* \"$PHP_INI_DIR/\"; \t\tcd /; \tdocker-php-source delete; \t\tapt-mark auto '.*' > /dev/null; \t[ -z \"$savedAptMark\" ] || apt-mark manual $savedAptMark; \tfind /usr/local -type f -executable -exec ldd '{}' ';' \t\t| awk '/=>/ { print $(NF-1) }' \t\t| sort -u \t\t| xargs -r dpkg-query --search \t\t| cut -d: -f1 \t\t| sort -u \t\t| xargs -r apt-mark manual \t; \tapt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false; \trm -rf /var/lib/apt/lists/*; \t\tpecl update-channels; \trm -rf /tmp/pear ~/.pearrc; \t\tphp --version",
          "system_commands": [
            "set -eux; savedAptMark=\"$(apt-mark showmanual)\"; apt-get update; apt-get install -y --no-install-recommends apache2-dev libargon2-dev libcurl4-openssl-dev libonig-dev libreadline-dev libsodium-dev libsqlite3-dev libssl-dev libxml2-dev zlib1g-dev ; export CFLAGS=\"$PHP_CFLAGS\" CPPFLAGS=\"$PHP_CPPFLAGS\" LDFLAGS=\"$PHP_LDFLAGS\" ; docker-php-source extract; cd /usr/src/php; gnuArch=\"$(dpkg-architecture --query DEB_BUILD_GNU_TYPE)\"; debMultiarch=\"$(dpkg-architecture --query DEB_BUILD_MULTIARCH)\"; if [ ! -d /usr/include/curl ]; then ln -sT \"/usr/include/$debMultiarch/curl\" /usr/local/include/curl; fi; ./configure --build=\"$gnuArch\" --with-config-file-path=\"$PHP_INI_DIR\" --with-config-file-scan-dir=\"$PHP_INI_DIR/conf.d\" --enable-option-checking=fatal --with-mhash --with-pic --enable-ftp --enable-mbstring --enable-mysqlnd --with-password-argon2 --with-sodium=shared --with-pdo-sqlite=/usr --with-sqlite3=/usr --with-curl --with-iconv --with-openssl --with-readline --with-zlib --disable-phpdbg --with-pear $(test \"$gnuArch\" = 's390x-linux-gnu'",
            "echo '--without-pcre-jit') --with-libdir=\"lib/$debMultiarch\" --disable-cgi --with-apxs2 ; make -j \"$(nproc)\"; find -type f -name '*.a' -delete; make install; find /usr/local -type f -perm '/0111' -exec sh -euxc ' strip --strip-all \"$@\" || : ' -- '{}' + ; make clean; cp -v php.ini-* \"$PHP_INI_DIR/\"; cd /; docker-php-source delete; apt-mark auto '.*' > /dev/null; [ -z \"$savedAptMark\" ] || apt-mark manual $savedAptMark; find /usr/local -type f -executable -exec ldd '{}' ';' | awk '/=>/ { print $(NF-1) }' | sort -u | xargs -r dpkg-query --search | cut -d: -f1 | sort -u | xargs -r apt-mark manual ; apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false; rm -rf /var/lib/apt/lists/*; pecl update-channels; rm -rf /tmp/pear ~/.pearrc; php --version"
          ]
        },
        {
          "type": "COPY",
          "time": "2022-05-11T07:09:01Z",
          "is_nop": true,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 7214,
          "size_human": "7.2 kB",
          "params": "multi:e11221d43af7136e4dbad5a74e659bcfa753214a9e615c3daf357f1633d9d3d1 in /usr/local/bin/",
          "command_snippet": "COPY multi:e11221d43af7136e4dbad5a74e659bcfa...",
          "command_all": "COPY multi:e11221d43af7136e4dbad5a74e659bcfa753214a9e615c3daf357f1633d9d3d1 /usr/local/bin/",
          "target": "/usr/local/bin/",
          "source_type": "multi"
        },
        {
          "type": "RUN",
          "time": "2022-05-11T07:09:02Z",
          "is_nop": false,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 17,
          "size_human": "17 B",
          "command_snippet": "RUN docker-php-ext-enable sodium",
          "command_all": "RUN docker-php-ext-enable sodium",
          "system_commands": [
            "docker-php-ext-enable sodium"
          ]
        },
        {
          "type": "ENTRYPOINT",
          "time": "2022-05-11T07:09:02Z",
          "is_nop": true,
          "is_exec_form": true,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 0,
          "params": "[\"docker-php-entrypoint\"]\n",
          "command_snippet": "ENTRYPOINT [\"docker-php-entrypoint\"]\n",
          "command_all": "ENTRYPOINT [\"docker-php-entrypoint\"]\n"
        },
        {
          "type": "STOPSIGNAL",
          "time": "2022-05-11T07:09:03Z",
          "is_nop": true,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 0,
          "params": "SIGWINCH",
          "command_snippet": "STOPSIGNAL SIGWINCH",
          "command_all": "STOPSIGNAL SIGWINCH"
        },
        {
          "type": "COPY",
          "time": "2022-05-11T07:09:05Z",
          "is_nop": true,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 1346,
          "size_human": "1.3 kB",
          "params": "file:e3123fcb6566efa979f945bfac1c94c854a559d7b82723e42118882a8ac4de66 in /usr/local/bin/",
          "command_snippet": "COPY file:e3123fcb6566efa979f945bfac1c94c854...",
          "command_all": "COPY file:e3123fcb6566efa979f945bfac1c94c854a559d7b82723e42118882a8ac4de66 /usr/local/bin/",
          "target": "/usr/local/bin/",
          "source_type": "file"
        },
        {
          "type": "WORKDIR",
          "time": "2022-05-11T07:09:05Z",
          "is_nop": true,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 0,
          "params": "/var/www/html",
          "command_snippet": "WORKDIR /var/www/html",
          "command_all": "WORKDIR /var/www/html",
          "system_commands": [
            "mkdir -p /var/www/html"
          ]
        },
        {
          "type": "EXPOSE",
          "time": "2022-05-11T07:09:06Z",
          "is_nop": true,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 0,
          "params": "80",
          "command_snippet": "EXPOSE 80",
          "command_all": "EXPOSE 80"
        },
        {
          "type": "CMD",
          "time": "2022-05-11T07:09:07Z",
          "is_nop": true,
          "is_exec_form": true,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 0,
          "params": "[\"apache2-foreground\"]\n",
          "command_snippet": "CMD [\"apache2-foreground\"]\n",
          "command_all": "CMD [\"apache2-foreground\"]\n"
        },
        {
          "type": "RUN",
          "time": "2022-05-11T23:29:39Z",
          "is_nop": false,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 51602625,
          "size_human": "52 MB",
          "command_snippet": "RUN set -eux; \tapt-get update; \tapt-get inst...",
          "command_all": "RUN set -eux; \tapt-get update; \tapt-get install -y --no-install-recommends \t\tghostscript \t; \trm -rf /var/lib/apt/lists/*",
          "system_commands": [
            "set -eux",
            "apt-get update",
            "apt-get install -y --no-install-recommends ghostscript",
            "rm -rf /var/lib/apt/lists/*"
          ]
        },
        {
          "type": "RUN",
          "time": "2022-05-11T23:30:56Z",
          "is_nop": false,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 23493028,
          "size_human": "24 MB",
          "command_snippet": "RUN set -ex; \t\tsavedAptMark=\"$(apt-mark show...",
          "command_all": "RUN set -ex; \t\tsavedAptMark=\"$(apt-mark showmanual)\"; \t\tapt-get update; \tapt-get install -y --no-install-recommends \t\tlibfreetype6-dev \t\tlibicu-dev \t\tlibjpeg-dev \t\tlibmagickwand-dev \t\tlibpng-dev \t\tlibwebp-dev \t\tlibzip-dev \t; \t\tdocker-php-ext-configure gd \t\t--with-freetype \t\t--with-jpeg \t\t--with-webp \t; \tdocker-php-ext-install -j \"$(nproc)\" \t\tbcmath \t\texif \t\tgd \t\tintl \t\tmysqli \t\tzip \t; \tpecl install imagick-3.6.0; \tdocker-php-ext-enable imagick; \trm -r /tmp/pear; \t\tout=\"$(php -r 'exit(0);')\"; \t[ -z \"$out\" ]; \terr=\"$(php -r 'exit(0);' 3>&1 1>&2 2>&3)\"; \t[ -z \"$err\" ]; \t\textDir=\"$(php -r 'echo ini_get(\"extension_dir\");')\"; \t[ -d \"$extDir\" ]; \tapt-mark auto '.*' > /dev/null; \tapt-mark manual $savedAptMark; \tldd \"$extDir\"/*.so \t\t| awk '/=>/ { print $3 }' \t\t| sort -u \t\t| xargs -r dpkg-query -S \t\t| cut -d: -f1 \t\t| sort -u \t\t| xargs -rt apt-mark manual; \t\tapt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false; \trm -rf /var/lib/apt/lists/*; \t\t! { ldd \"$extDir\"/*.so | grep 'not found'; }; \terr=\"$(php --version 3>&1 1>&2 2>&3)\"; \t[ -z \"$err\" ]",
          "system_commands": [
            "set -ex",
            "savedAptMark=\"$(apt-mark showmanual)\"",
            "apt-get update",
            "apt-get install -y --no-install-recommends libfreetype6-dev libicu-dev libjpeg-dev libmagickwand-dev libpng-dev libwebp-dev libzip-dev",
            "docker-php-ext-configure gd --with-freetype --with-jpeg --with-webp",
            "docker-php-ext-install -j \"$(nproc)\" bcmath exif gd intl mysqli zip",
            "pecl install imagick-3.6.0",
            "docker-php-ext-enable imagick",
            "rm -r /tmp/pear",
            "out=\"$(php -r 'exit(0)",
            "')\"",
            "[ -z \"$out\" ]",
            "err=\"$(php -r 'exit(0)",
            "' 3>&1 1>&2 2>&3)\"",
            "[ -z \"$err\" ]",
            "extDir=\"$(php -r 'echo ini_get(\"extension_dir\")",
            "')\"",
            "[ -d \"$extDir\" ]",
            "apt-mark auto '.*' > /dev/null",
            "apt-mark manual $savedAptMark",
            "ldd \"$extDir\"/*.so | awk '/=>/ { print $3 }' | sort -u | xargs -r dpkg-query -S | cut -d: -f1 | sort -u | xargs -rt apt-mark manual",
            "apt-get purge -y --auto-remove -o APT::AutoRemove::RecommendsImportant=false",
            "rm -rf /var/lib/apt/lists/*",
            "! { ldd \"$extDir\"/*.so | grep 'not found'",
            "}",
            "err=\"$(php --version 3>&1 1>&2 2>&3)\"",
            "[ -z \"$err\" ]"
          ]
        },
        {
          "type": "RUN",
          "time": "2022-05-11T23:30:57Z",
          "is_nop": false,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 173,
          "size_human": "173 B",
          "command_snippet": "RUN set -eux; \tdocker-php-ext-enable opcache...",
          "command_all": "RUN set -eux; \tdocker-php-ext-enable opcache; \t{ \t\techo 'opcache.memory_consumption=128'; \t\techo 'opcache.interned_strings_buffer=8'; \t\techo 'opcache.max_accelerated_files=4000'; \t\techo 'opcache.revalidate_freq=2'; \t\techo 'opcache.fast_shutdown=1'; \t} > /usr/local/etc/php/conf.d/opcache-recommended.ini",
          "system_commands": [
            "set -eux",
            "docker-php-ext-enable opcache",
            "{ echo 'opcache.memory_consumption=128'",
            "echo 'opcache.interned_strings_buffer=8'",
            "echo 'opcache.max_accelerated_files=4000'",
            "echo 'opcache.revalidate_freq=2'",
            "echo 'opcache.fast_shutdown=1'",
            "} > /usr/local/etc/php/conf.d/opcache-recommended.ini"
          ]
        },
        {
          "type": "RUN",
          "time": "2022-05-11T23:30:58Z",
          "is_nop": false,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 331,
          "size_human": "331 B",
          "command_snippet": "RUN { \t\techo 'error_reporting = E_ERROR | E_...",
          "command_all": "RUN { \t\techo 'error_reporting = E_ERROR | E_WARNING | E_PARSE | E_CORE_ERROR | E_CORE_WARNING | E_COMPILE_ERROR | E_COMPILE_WARNING | E_RECOVERABLE_ERROR'; \t\techo 'display_errors = Off'; \t\techo 'display_startup_errors = Off'; \t\techo 'log_errors = On'; \t\techo 'error_log = /dev/stderr'; \t\techo 'log_errors_max_len = 1024'; \t\techo 'ignore_repeated_errors = On'; \t\techo 'ignore_repeated_source = Off'; \t\techo 'html_errors = Off'; \t} > /usr/local/etc/php/conf.d/error-logging.ini",
          "system_commands": [
            "{ echo 'error_reporting = E_ERROR | E_WARNING | E_PARSE | E_CORE_ERROR | E_CORE_WARNING | E_COMPILE_ERROR | E_COMPILE_WARNING | E_RECOVERABLE_ERROR'",
            "echo 'display_errors = Off'",
            "echo 'display_startup_errors = Off'",
            "echo 'log_errors = On'",
            "echo 'error_log = /dev/stderr'",
            "echo 'log_errors_max_len = 1024'",
            "echo 'ignore_repeated_errors = On'",
            "echo 'ignore_repeated_source = Off'",
            "echo 'html_errors = Off'",
            "} > /usr/local/etc/php/conf.d/error-logging.ini"
          ]
        },
        {
          "type": "RUN",
          "time": "2022-05-11T23:30:59Z",
          "is_nop": false,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 51298,
          "size_human": "51 kB",
          "command_snippet": "RUN set -eux; \ta2enmod rewrite expires; \t\ta2...",
          "command_all": "RUN set -eux; \ta2enmod rewrite expires; \t\ta2enmod remoteip; \t{ \t\techo 'RemoteIPHeader X-Forwarded-For'; \t\techo 'RemoteIPTrustedProxy 10.0.0.0/8'; \t\techo 'RemoteIPTrustedProxy 172.16.0.0/12'; \t\techo 'RemoteIPTrustedProxy 192.168.0.0/16'; \t\techo 'RemoteIPTrustedProxy 169.254.0.0/16'; \t\techo 'RemoteIPTrustedProxy 127.0.0.0/8'; \t} > /etc/apache2/conf-available/remoteip.conf; \ta2enconf remoteip; \tfind /etc/apache2 -type f -name '*.conf' -exec sed -ri 's/([[:space:]]*LogFormat[[:space:]]+\"[^\"]*)%h([^\"]*\")/\\1%a\\2/g' '{}' +",
          "system_commands": [
            "set -eux",
            "a2enmod rewrite expires",
            "a2enmod remoteip",
            "{ echo 'RemoteIPHeader X-Forwarded-For'",
            "echo 'RemoteIPTrustedProxy 10.0.0.0/8'",
            "echo 'RemoteIPTrustedProxy 172.16.0.0/12'",
            "echo 'RemoteIPTrustedProxy 192.168.0.0/16'",
            "echo 'RemoteIPTrustedProxy 169.254.0.0/16'",
            "echo 'RemoteIPTrustedProxy 127.0.0.0/8'",
            "} > /etc/apache2/conf-available/remoteip.conf",
            "a2enconf remoteip",
            "find /etc/apache2 -type f -name '*.conf' -exec sed -ri 's/([[:space:]]*LogFormat[[:space:]]+\"[^\"]*)%h([^\"]*\")/1%a2/g' '{}' +"
          ]
        },
        {
          "type": "RUN",
          "time": "2022-05-11T23:31:02Z",
          "is_nop": false,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 58491419,
          "size_human": "58 MB",
          "command_snippet": "RUN set -eux; \tversion='5.9.3'; \tsha1='cab57...",
          "command_all": "RUN set -eux; \tversion='5.9.3'; \tsha1='cab576e112c45806c474b3cbe0d1263a2a879adf'; \t\tcurl -o wordpress.tar.gz -fL \"https://wordpress.org/wordpress-$version.tar.gz\"; \techo \"$sha1 *wordpress.tar.gz\" | sha1sum -c -; \t\ttar -xzf wordpress.tar.gz -C /usr/src/; \trm wordpress.tar.gz; \t\t[ ! -e /usr/src/wordpress/.htaccess ]; \t{ \t\techo '# BEGIN WordPress'; \t\techo ''; \t\techo 'RewriteEngine On'; \t\techo 'RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]'; \t\techo 'RewriteBase /'; \t\techo 'RewriteRule ^index\\.php$ - [L]'; \t\techo 'RewriteCond %{REQUEST_FILENAME} !-f'; \t\techo 'RewriteCond %{REQUEST_FILENAME} !-d'; \t\techo 'RewriteRule . /index.php [L]'; \t\techo ''; \t\techo '# END WordPress'; \t} > /usr/src/wordpress/.htaccess; \t\tchown -R www-data:www-data /usr/src/wordpress; \tmkdir wp-content; \tfor dir in /usr/src/wordpress/wp-content/*/ cache; do \t\tdir=\"$(basename \"${dir%/}\")\"; \t\tmkdir \"wp-content/$dir\"; \tdone; \tchown -R www-data:www-data wp-content; \tchmod -R 777 wp-content",
          "system_commands": [
            "set -eux",
            "version='5.9.3'",
            "sha1='cab576e112c45806c474b3cbe0d1263a2a879adf'",
            "curl -o wordpress.tar.gz -fL \"https://wordpress.org/wordpress-$version.tar.gz\"",
            "echo \"$sha1 *wordpress.tar.gz\" | sha1sum -c -",
            "tar -xzf wordpress.tar.gz -C /usr/src/",
            "rm wordpress.tar.gz",
            "[ ! -e /usr/src/wordpress/.htaccess ]",
            "{ echo '# BEGIN WordPress'",
            "echo ''",
            "echo 'RewriteEngine On'",
            "echo 'RewriteRule .* - [E=HTTP_AUTHORIZATION:%{HTTP:Authorization}]'",
            "echo 'RewriteBase /'",
            "echo 'RewriteRule ^index.php$ - [L]'",
            "echo 'RewriteCond %{REQUEST_FILENAME} !-f'",
            "echo 'RewriteCond %{REQUEST_FILENAME} !-d'",
            "echo 'RewriteRule . /index.php [L]'",
            "echo ''",
            "echo '# END WordPress'",
            "} > /usr/src/wordpress/.htaccess",
            "chown -R www-data:www-data /usr/src/wordpress",
            "mkdir wp-content",
            "for dir in /usr/src/wordpress/wp-content/*/ cache",
            "do dir=\"$(basename \"${dir%/}\")\"",
            "mkdir \"wp-content/$dir\"",
            "done",
            "chown -R www-data:www-data wp-content",
            "chmod -R 777 wp-content"
          ]
        },
        {
          "type": "VOLUME",
          "time": "2022-05-11T23:31:03Z",
          "is_nop": true,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 0,
          "params": "[/var/www/html]",
          "command_snippet": "VOLUME [/var/www/html]",
          "command_all": "VOLUME [/var/www/html]"
        },
        {
          "type": "COPY",
          "time": "2022-05-11T23:31:04Z",
          "is_nop": true,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 5480,
          "size_human": "5.5 kB",
          "params": "--chown=www-data:www-datafile:f95ddeaad9b50ddddf288560052a9de4f33fa6297ea70870e396f6d99c482b7a in /usr/src/wordpress/",
          "command_snippet": "COPY --chown=www-data:www-datafile:f95ddeaad...",
          "command_all": "COPY --chown=www-data:www-datafile:f95ddeaad9b50ddddf288560052a9de4f33fa6297ea70870e396f6d99c482b7a /usr/src/wordpress/",
          "target": "/usr/src/wordpress/",
          "source_type": "--chown=www-data"
        },
        {
          "type": "COPY",
          "time": "2022-05-11T23:31:05Z",
          "is_nop": true,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 3372,
          "size_human": "3.4 kB",
          "params": "file:5be6bcc31206cb827f037769d89fd092037ed61a1e10d6cae7939a37055beb4c in /usr/local/bin/",
          "command_snippet": "COPY file:5be6bcc31206cb827f037769d89fd09203...",
          "command_all": "COPY file:5be6bcc31206cb827f037769d89fd092037ed61a1e10d6cae7939a37055beb4c /usr/local/bin/",
          "target": "/usr/local/bin/",
          "source_type": "file"
        },
        {
          "type": "ENTRYPOINT",
          "time": "2022-05-11T23:31:05Z",
          "is_nop": true,
          "is_exec_form": true,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 0,
          "params": "[\"docker-entrypoint.sh\"]\n",
          "command_snippet": "ENTRYPOINT [\"docker-entrypoint.sh\"]\n",
          "command_all": "ENTRYPOINT [\"docker-entrypoint.sh\"]\n"
        },
        {
          "type": "CMD",
          "time": "2022-05-11T23:31:06Z",
          "is_nop": true,
          "is_exec_form": true,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 0,
          "params": "[\"apache2-foreground\"]\n",
          "command_snippet": "CMD [\"apache2-foreground\"]\n",
          "command_all": "CMD [\"apache2-foreground\"]\n"
        },
        {
          "type": "RUN",
          "time": "2022-05-20T23:19:39Z",
          "is_nop": false,
          "is_exec_form": true,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 6494444,
          "size_human": "6.5 MB",
          "command_snippet": "RUN [\"RUN\",\"/bin/sh\",\"-c\",\"curl\",\"-O\",\"https...",
          "command_all": "RUN [\"RUN\",\"/bin/sh\",\"-c\",\"curl\",\"-O\",\"https://raw.githubusercontent.com/wp-cli/builds/gh-pages/phar/wp-cli.phar\",\"&&\",\"chmod\",\"+x\",\"wp-cli.phar\",\"&&\",\"mv\",\"wp-cli.phar\",\"/usr/local/bin/wp\"]",
          "system_commands": [
            "[\"RUN\",\"/bin/sh\",\"-c\",\"curl\",\"-O\",\"https://raw.githubusercontent.com/wp-cli/builds/gh-pages/phar/wp-cli.phar\",\"",
            "\",\"chmod\",\"+x\",\"wp-cli.phar\",\"",
            "\",\"mv\",\"wp-cli.phar\",\"/usr/local/bin/wp\"]"
          ],
          "comment": "buildkit.dockerfile.v0"
        },
        {
          "type": "RUN",
          "time": "2022-05-20T23:19:52Z",
          "is_nop": false,
          "is_exec_form": true,
          "local_image_exists": false,
          "layer_index": 0,
          "size": 2550083,
          "size_human": "2.6 MB",
          "command_snippet": "RUN [\"RUN\",\"/bin/sh\",\"-c\",\"yes\",\"|\",\"pecl\",\"...",
          "command_all": "RUN [\"RUN\",\"/bin/sh\",\"-c\",\"yes\",\"|\",\"pecl\",\"install\",\"xdebug\"]",
          "system_commands": [
            "[\"RUN\",\"/bin/sh\",\"-c\",\"yes\",\"|\",\"pecl\",\"install\",\"xdebug\"]"
          ],
          "comment": "buildkit.dockerfile.v0"
        },
        {
          "type": "RUN",
          "time": "2022-05-20T23:19:52Z",
          "is_last_instruction": true,
          "is_nop": false,
          "is_exec_form": true,
          "local_image_exists": true,
          "layer_index": 0,
          "size": 1587,
          "size_human": "1.6 kB",
          "command_snippet": "RUN [\"COPY\",\".\",\".\"]",
          "command_all": "RUN [\"COPY\",\".\",\".\"]",
          "system_commands": [
            "[\"COPY\",\".\",\".\"]"
          ],
          "comment": "buildkit.dockerfile.v0",
          "raw_tags": [
            "nextpress/caesar-wordpress:0.0.5",
            "nextpress/caesar-wordpress:latest"
          ]
        }
      ]
    }
  ]
}
